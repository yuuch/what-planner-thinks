# 遗传算法 (GEQO)

当参与连接的表数量非常多时（默认 >= 12，由 `geqo_threshold` 控制），动态规划的搜索空间（指数级增长）会变得太大，导致规划时间过长。此时，PostgreSQL 会切换到 **遗传查询优化 (Genetic Query Optimization, GEQO)**。

## 原理

GEQO 是一种启发式算法，基于生物进化论的原理。它不保证找到全局最优解，但试图在有限时间内找到一个“足够好”的解。

这个问题本质上类似于 **旅行商问题 (TSP)**：寻找访问所有城市（表）的一条最短路径（最优连接顺序）。

## 算法流程

1.  **种群初始化 (Initialization)**: 随机生成一组连接顺序（个体），称为“种群”。
2.  **适应度评估 (Fitness Evaluation)**: 计算每个个体的代价（即该连接顺序下的总执行代价）。代价越低，适应度越高。
3.  **选择 (Selection)**: 倾向于选择适应度高的个体作为父母。
4.  **交叉 (Crossover)**: 组合父母的基因（连接片段），生成新的后代。
5.  **变异 (Mutation)**: 随机改变后代的一些基因，增加多样性，防止陷入局部最优。
6.  **迭代**: 重复步骤 2-5，直到达到预定的代数或时间限制。

## 优缺点

*   **优点**: 规划速度快，随表数量线性增长，而非指数增长。
*   **缺点**: 结果具有随机性（非确定性），可能错过最优计划。

## 配置

*   `geqo`: 开关。
*   `geqo_threshold`: 触发阈值。
*   `geqo_effort`: 控制算法的努力程度（种群大小、代数）。
